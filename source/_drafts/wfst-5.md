---
title: WFST详解#5
date: 2017-11-8 23:34:00
tags: ["语音识别"]
---

# Determinzation

### 定义

Determinization是WFST优化的一个重要算法。它的意思是确定化。从一个状态出发的弧当中，输入状态不能重复。如果存在重复的输入，那么如果有一个输入到这个状态，它将无法判断要从哪一个弧线输入。这会造成整个转换效率的降低。

优化之后的转换器有如下的特点：
* 状态根据输入的标签进行组合
* 同样的输入，不能重复
* 最后状态压缩成一个，即不存在超过一个的终止状态
* 最后状态的转换使用epsilon转换（空转换）

### 算法
下面是Moris论文中的伪代码：

<img src="algorithm.png" style="margin-left:50%;transform: translateX(-50%);">

上面的代码直接看可能有点吃力，在这里对该整体进行一个阐述。首先，该算法是在原本的图的基础上构建一个新的图，因此我们需要对一些状态进行聚合，然后新建一些弧。而状态的产生也正是依赖这些弧。产生弧的过程，也是整个图产生的过程。弧的产生需要有起始状态，标签，权重，目标状态。
* 从源头开始，初始化，将起始状态的权重初始化为$$ \bio 1 $$。
* 计算权重：从起点开始，对于相同的输入标签，我们通过$$ $$将起始权重和当前弧进行操作。我们可以获得一系列的值。最后整体通过一个$$$$，便可以得到一个权重。
* 通过公式，计算出新的状态的权重。通过这些权重和标签，我们可以得到新的状态了。这个权重作为下一次计算的起始权重。
* 如果当前新的状态中，存在着终止状态，则需要计算新的终止状态的权重。

### 手算
下面，我们举一个例子，将下面的WFSA确定化。这里我们使用tropical ring的运算规则。

<img src="before.png" style="margin-left:50%;transform: translateX(-50%);">

手推如下：

我们最终可以的到结果如下所示：

<img src="after.png" style="margin-left:50%;transform: translateX(-50%);">

可以看到，推导的结果和最终结果一致。

### WFST
而在WFST的情况下，则需要多考虑一个输出的问题。

最后，我们需要将最终状态压缩成一个。
